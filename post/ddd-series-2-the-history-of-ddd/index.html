<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta http-equiv="Cache-Control" content="max-age=3600, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="-1">

        <title>DDD Series - 2 - The history of DDD | BLOG</title>
        <meta name="title" content="DDD Series - 2 - The history of DDD | BLOG">
        <meta name="description" content="Helping others with useful content">
        <meta name="keywords" content="posts,posts,technical,ddd,intro,series,digitalization,business,management,agile,software,softwareengineering,softwarearchitecture,programming">
        <meta name="author" content="BaHI">
        <meta name="robots" content="index, follow">

        <link rel="canonical" href="https://blog.domain.com/post/ddd-series-2-the-history-of-ddd/">
        <link rel="shortcut icon" type="image/png" href="/jamstack-eleventy-custom/assets/img/favicon.png">
        
        <link rel="preconnect" href="cdnjs.cloudflare.com">
        <link rel="dns-prefetch" href="cdnjs.cloudflare.com">

        <link rel="preconnect" href="cdn.jsdelivr.net">
        <link rel="dns-prefetch" href="cdn.jsdelivr.net">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        
        <script src="/jamstack-eleventy-custom/assets/js/custom/clipboard-copy.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/ejs@3.1.6/ejs.min.js" integrity="sha256-mOsgtygNfXBUPc/+cc19yr+g0jieqYOgRL5xFD2sC0Y=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" integrity="sha512-4xUl/d6D6THrAnXAwGajXkoWaeMNwEKK4iNfq5DotEbLPAfk6FSxSP3ydNxqDgCw1c/0Z1Jg6L8h2j+++9BZmg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/he/1.2.0/he.min.js" integrity="sha512-PEsccDx9jqX6Dh4wZDCnWMaIO3gAaU0j46W//sSqQhUQxky6/eHZyeB3NrXD2xsyugAKd4KPiDANkcuoEa2JuA==" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="stylesheet" href="/jamstack-eleventy-custom/assets/css/main.css" />

    </head>
    <body>

        <header class="sticky-top">
            <nav class="navbar navbar-this navbar-expand-lg">

    <div class="container">

        <a class="navbar-brand align-middle" href="#">
            <img src="/jamstack-eleventy-custom/assets/logo.png" />
        </a>

        <div class="ms-auto mx-2"></div>

        <!-- standalone search bar activator (below navigation) -->
        <a type="button" role="button" class="btn border-0 me-2 d-lg-none"
            data-bs-toggle="collapse" data-bs-target="#blog-search-bar">
            <!-- d-sm-none = hide if above sm -->
            <i class="fas fa-search"></i>
        </a>

        <button type="button" class="btn navbar-toggler"
            data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <!-- Using navbar-toggler fix in main.scss and FA icons instead of: <span class="navbar-toggler-icon"></span> -->
            <i class="fas fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarNavDropdown">

            <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-sm-0">

                <li class="nav-item col-6 col-lg-auto">
                    <a class="nav-link p-2" href="/jamstack-eleventy-custom/">Home</a>
                </li>

                <li class="nav-item col-6 col-lg-auto">
                    <a class="nav-link p-2" href="/jamstack-eleventy-custom/posts/1/">Posts</a>
                </li>

                <li class="nav-item col-6 col-lg-auto">
                    <a class="nav-link p-2" href="/jamstack-eleventy-custom/tags">Tags</a>
                </li>

                <li class="nav-item col-6 col-lg-auto">
                    <a class="nav-link p-2" href="/jamstack-eleventy-custom/categories">Categories</a>
                </li>

                <li class="nav-item col-6 col-lg-auto">
                    <a class="nav-link p-2" href="/jamstack-eleventy-custom/series">Series</a>
                </li>

            </ul>

        </div>

        <!-- inline search-bar with same expand breakpoint as navigation -->
        <nav class="nav-search d-none d-lg-inline">
            <!-- hidden by def., visible (block) aft. size SM -->
            <div class="inline-input-group inline-text-right">
                <span class="inline-text"><i class="fas fa-search"></i></span>
                <input type="text" class="blog-search-input form-control py-0" placeholder="Search...">
            </div>
        </nav>

    </div>

</nav>

<!-- standalone search bar (below navigation) with same breakpoint as navigation (shown on collapse) -->
<nav class="nav-search-below d-lg-none collapse p-3" id="blog-search-bar">
    <div class="container">
        <!-- d-sm-none = hide if above sm -->
        <div class="inline-input-group inline-text-left">
            <span class="inline-text"><i class="fas fa-search"></i></span>
            <input type="text" class="blog-search-input form-control" placeholder="Search...">
        </div>

    </div>
</nav>
        </header>

        <main>
            
            

    

    <div class="container">

        <div id="global-content-view" class="row pt-3">

            <div class="col-12 col-xl-9 p-0 overflow-hidden">
                

    
    
    
    <section class="p-3 d-flex d-flex justify-content-between align-items-center">
        
<section class="share-wrapper">
    <span class="share-label text-muted mr-1">Share post</span>
    <span class="share-icons">
        
               
        
            
                
                <a  href="https://www.linkedin.com/sharing/share-offsite/?url=/post/ddd-series-2-the-history-of-ddd/"
                    data-toggle="tooltip"
                    data-placement="top"
                    title="LinkedIn"
                    target="_blank" rel="noopener"
                    aria-label="LinkedIn"
                    >
                    <i class="fa-fw fab fa-fw fa-linkedin"></i>
                </a>
            
        
            
        
            
                
                <a  href="https://twitter.com/intent/tweet?text=Share post&amp;url=/post/ddd-series-2-the-history-of-ddd/"
                    data-toggle="tooltip"
                    data-placement="top"
                    title="Twitter"
                    target="_blank" rel="noopener"
                    aria-label="Twitter"
                    >
                    <i class="fa-fw fab fa-fw fa-twitter"></i>
                </a>
            
        
            
        
            
        
            
        

        <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i>
    </span>
</section>

<script>
    function copyLink(url) {

        if (!url || 0 === url.length)
            url = window.location.href;

        ClipboardCopy.copy(
            url,
            () => { alert("Link copied successfully!"); },
            (err) => { alert("Link copy failed! Error: ", err); },
        );
    }
</script>

    </section>
    
    <section class="article print-container p-3 mb-3">

        <section>
            <h1>DDD Series - 2 - The history of DDD</h1>
            
            <p>This article is part of the serie: <a href="/jamstack-eleventy-custom/serie/ddd-series">ddd series</a></p>
            <section class="pb-3">
                
 


<div class="d-flex">
    <div class="post-navigation-button text-start me-auto">
        <a class="btn btn-sm btn-outline-primary" href="/jamstack-eleventy-custom/post/ddd-series-1-intro/" title="DDD Series - 1 - Intro"><i class="me-3 fas fa-chevron-left align-middle"></i>DDD Series - 1 - Intro</a>
    </div>
    
    <div class="post-navigation-button text-end ms-auto">
        <a class="btn btn-sm btn-outline-primary" href="/jamstack-eleventy-custom/post/ddd-series-3-ddd-building-blocks/" title="DDD Series - 3 - DDD building blocks">DDD Series - 3 - DDD building blocks<i class="ms-3 fas fa-chevron-right align-middle"></i></a>
    </div>
    </div>
            </section>
            
        </section>

        <section class="small">
            <div class="row row-cols-auto gx-3">
                <div class="col"><i class="far fa-fw fa-calendar-alt"></i>06 Jan 2021</div>
                <div class="col"><i class="far fa-fw fa-user"></i>BaHI</div>
                <div class="col"><i class="fas fa-fw fa-stopwatch"></i> 1 min reading time</div>
            </div>
            <hr/>
        </section>

        <section class="pb-3">
            <img class="img-responsive" src="/jamstack-eleventy-custom/assets/img/wrong-way.jpg">
            <p>Quisque dui ipsum, facilisis vulputate lorem sed, bibendum placerat velit. Quisque massa arcu, faucibus quis massa iaculis, fermentum commodo risus. Mauris vel mi ac risus dignissim eleifend. Etiam nec congue quam. Proin id tortor vitae risus bibendum scelerisque in nec arcu. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut id tellus ut odio ornare luctus eu non purus. Integer lacinia blandit ex nec congue. Morbi imperdiet aliquet sem vel lobortis. Etiam volutpat nulla non sapien vestibulum, et lacinia ligula sodales. Nulla at ultrices nibh. Donec luctus eros id velit porttitor, ut consequat ligula volutpat. Etiam condimentum sed magna at mollis. In tempus urna lobortis fermentum viverra.</p>
<p><img src="/assets/img/wrong-way.jpg" alt="Image link" title="Static image"></p>

        </section>

    </section>

    <section class="p-3">
        


<div class="d-flex">
    <div class="post-navigation-button text-start me-auto">
        <a class="btn btn-sm btn-outline-primary" href="/jamstack-eleventy-custom/post/ddd-series-1-intro/" title="DDD Series - 1 - Intro"><i class="me-3 fas fa-chevron-left align-middle"></i>DDD Series - 1 - Intro</a>
    </div>
    
    <div class="post-navigation-button text-end ms-auto">
        <a class="btn btn-sm btn-outline-primary" href="/jamstack-eleventy-custom/post/ddd-series-3-ddd-building-blocks/" title="DDD Series - 3 - DDD building blocks">DDD Series - 3 - DDD building blocks<i class="ms-3 fas fa-chevron-right align-middle"></i></a>
    </div>
    </div>

    </section>

    <section class="p-3">
        
    </section>
  

            </div>

            <aside class="sticky-container d-none d-xl-block small col-xl-3 p-0">
                

    <section class="sticky p-3 mb-3 d-hide-if-empty">
        
        


<div class="heading">
    <h2 class="d-inline">Articles in serie</h2>
    <a class="sticky-link btn btn-sm btn-outline-primary float-end"><i class="fas fa-link"></i></a>
</div>

<div><ul>

    <li>
        <a href="/jamstack-eleventy-custom/post/ddd-series-1-intro/">DDD Series - 1 - Intro - ddd series</a></li>
    
    <li>
        <span class="active">DDD Series - 2 - The history of DDD - ddd series</span>
    <li>
        <a href="/jamstack-eleventy-custom/post/ddd-series-3-ddd-building-blocks/">DDD Series - 3 - DDD building blocks - ddd series</a></li>
    
    <li>
        <a href="/jamstack-eleventy-custom/post/ddd-series-4-how-orm-changed-the-way-we-do-ddd/">DDD Series - 4 - How ORM changed the way we do DDD - ddd series</a></li>
    
</ul></div>


    </section>

    <section class="sticky p-3 mb-3 d-hide-if-empty">
        
        


<div class="heading">
    <h2 class="d-inline">Similar articles</h2>
    <a class="sticky-link btn btn-sm btn-outline-primary float-end"><i class="fas fa-link"></i></a>
</div>

<div><ul class="related-posts">
    
    <li>
        
        <a href="/jamstack-eleventy-custom/post/ddd-series-5-bounded-context-at-help-to-tackle-complexity/">
            <span>DDD Series - 5 - Bounded context at help to tackle complexity</span>
        </a>
    </li>
    
    <li>
        
        <a href="/jamstack-eleventy-custom/post/ddd-series-1-intro/">
            <span>DDD Series - 1 - Intro</span>
        </a>
    </li>
    
    <li>
        
        <a href="/jamstack-eleventy-custom/post/ddd-series-3-ddd-building-blocks/">
            <span>DDD Series - 3 - DDD building blocks</span>
        </a>
    </li>
    
    <li>
        
        <a href="/jamstack-eleventy-custom/post/ddd-series-4-how-orm-changed-the-way-we-do-ddd/">
            <span>DDD Series - 4 - How ORM changed the way we do DDD</span>
        </a>
    </li>
    
    <li>
        
        <a href="/jamstack-eleventy-custom/post/ddd-series-6-summary/">
            <span>DDD Series - 6 - Summary</span>
        </a>
    </li>
    
</ul></div>


    </section>

    <section class="sticky p-3 mb-3">
        
<div class="heading">
    <h2 class="d-inline">Recent posts</h2>
    <a class="sticky-link btn btn-sm btn-outline-primary float-end"><i class="fas fa-link"></i></a>
</div>

        
<ul class="recent-posts">
    
    <li>
        <a href="/jamstack-eleventy-custom/post/enable-google-page-views/">
            <span>Enable Google Page Views</span>
        </a>
    </li>
    
    <li>
        <a href="/jamstack-eleventy-custom/post/customize-the-favicon/">
            <span>Customize the Favicon</span>
        </a>
    </li>
    
    <li>
        <a href="/jamstack-eleventy-custom/post/getting-started/">
            <span>Getting Started</span>
        </a>
    </li>
    
    <li>
        <a href="/jamstack-eleventy-custom/post/writing-a-new-post/">
            <span>Writing a New Post</span>
        </a>
    </li>
    
    <li>
        <a href="/jamstack-eleventy-custom/post/text-and-typography/">
            <span>Text and Typography</span>
        </a>
    </li>
    
</ul>
    </section>
    
    <section class="sticky p-3 mb-3 d-hide-if-empty">
        
<div class="heading">
    <h2 class="d-inline">Tag cloud</h2>
    <a class="sticky-link btn btn-sm btn-outline-primary float-end"><i class="fas fa-link"></i></a>
</div>

         
    <span style="font-size: 1.05em;">
        <a href="/jamstack-eleventy-custom/tag/blog/1/">blog</a>
    </span>
 
    <span style="font-size: 1.1125em;">
        <a href="/jamstack-eleventy-custom/tag/ddd/1/">ddd</a>
    </span>
 
    <span style="font-size: 0.8625em;">
        <a href="/jamstack-eleventy-custom/tag/dont/1/">dont</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/favicon/1/">favicon</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/getting-started/1/">getting started</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/google-analytics/1/">google analytics</a>
    </span>
 
    <span style="font-size: 1.1125em;">
        <a href="/jamstack-eleventy-custom/tag/intro/1/">intro</a>
    </span>
 
    <span style="font-size: 1.05em;">
        <a href="/jamstack-eleventy-custom/tag/jekyll/1/">jekyll</a>
    </span>
 
    <span style="font-size: 0.925em;">
        <a href="/jamstack-eleventy-custom/tag/management/1/">management</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/outer-middle-inner/1/">outer - middle - inner</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/pageviews/1/">pageviews</a>
    </span>
 
    <span style="font-size: 1.8em;">
        <a href="/jamstack-eleventy-custom/tag/posts/1/">posts</a>
    </span>
 
    <span style="font-size: 1.05em;">
        <a href="/jamstack-eleventy-custom/tag/samples/1/">samples</a>
    </span>
 
    <span style="font-size: 0.925em;">
        <a href="/jamstack-eleventy-custom/tag/samples-11ty-customized/1/">samples, 11ty-customized</a>
    </span>
 
    <span style="font-size: 1.1125em;">
        <a href="/jamstack-eleventy-custom/tag/series/1/">series</a>
    </span>
 
    <span style="font-size: 1.3em;">
        <a href="/jamstack-eleventy-custom/tag/technical/1/">technical</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/typography/1/">typography</a>
    </span>
 
    <span style="font-size: 0.8em;">
        <a href="/jamstack-eleventy-custom/tag/writing/1/">writing</a>
    </span>


    </section>

    <section class="sticky p-3 mb-3 d-hide-if-empty">
        
        


    </section>


            </aside>

        </div>

        <div id="search-results-container" class="row pt-3 d-none">
            <div class="search-results col-12">
            </div>
        </div>

    </div>

    


        </main>

	    <!-- dynamic & custom scripts to alter rendered content -->
        <script>

    /* uses:
    EJS.CO for templating
    LUNR for search
    HE for HTML encoding (at highlight fnc.)
    */
   
    class Debouncer {
        _timeoutId = undefined;
        _wait = 250;
        _callback;

        constructor(callback, wait) {
            this._wait = wait ? wait : this._wait;
            this._callback = callback;
        }

        next(...args) {
            this.cancel();
            this._timeoutId = window.setTimeout(() => {
            this._callback.apply(null, args);
            }, this._wait);
        }

        cancel() {
            window.clearTimeout(this._timeoutId);
        }
    }

    const blogSearch = {

        _searchIndexPath: '/jamstack-eleventy-custom/search.json',
        _urlPrefix: '/jamstack-eleventy-custom/',
        _debounceTime: 400,

        _searchingTemplate: `
<h2>
    <i class="text-secondary fas fa-spin fa-circle-notch"></i>
    <span class="text-secondary">Searching for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>
`,

        _resultTemplate_simple: `
<h2>
    <span class="text-secondary">Search results for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>

<ul class="search-results">
<% searchResults.forEach((sr, idx, arr) => { %>
    <li>
        <div class="search-result-item position-relative border shadow">
            <h5><%- sr.ref.title %></h5>
            <p class="x-text-nowrap x-text-truncate"><%- sr.ref.summary %></p>
            <a href="<%- urlPrefix %><%- sr.ref.url %>" class="stretched-link"></a>
        </div>
    </li>
<% }); %>
</ul>        
`,

        _resultTemplate: `
<h2>
    <span class="text-secondary">Search results for:</span>
    <span class="text-primary"><%= searchText %></span>
</h2>

<ul class="search-results">
<% searchResults.forEach((sr, idx, arr) => { %>
    <li>

        <div class="catalogue-item position-relative">
            
            <a class="stretched-link" href="<%- urlPrefix %><%- sr.ref.url %>"></a>
            <h3 class="catalogue-title"><%- sr.ref.title %></h3>
            <div class="catalogue-line"></div>

            <div class="catalogue-preview clearfix">
                <% if (sr.ref.image) { %>
                <img src="<%- sr.ref.image %>" class="catalogue-image img-fluid img-thumbnail"></img>
                <% } %>
                <div class="excerpt">
                    <%- sr.ref.summary %>
                </div>
            </div>

        </div>

    </li>
<% }); %>
</ul>        
`,

        _inputElements: [],
        _cancelElements: [],
        
        _updateInputs(value) {
            this._inputElements.forEach(el => el.value = value);
        },

        _setUpListeners(inputSelector, cancelSelector) {
            if (inputSelector) {
                this._inputElements = document.querySelectorAll(inputSelector);
                this._inputElements.forEach(el => el.addEventListener('keyup', evt => { if (evt.keyCode == 27) this._escapePressed(el); else this._inputValueChanged(el); } ));
            } else {
                this._inputElements = [];
            }

            if (cancelSelector) {
                this._cancelElements = document.querySelectorAll(cancelSelector);
            } else {
                this._cancelElements = [];
            }
        },

        _escapePressed(el) {
            this.clearSearch();
        },

        _inputValueChanged(el) {
            const value = el.value;
            this._updateInputs(value);
            this._debouncedSearch.next(value);
        },

        _resultContainerEls: [],
        _containersToHideEls: [],

        _setUpContainers(resultContainerSelector, containersToHideWhenResultSelector) {
            this._resultContainerEls = document.querySelectorAll(resultContainerSelector);
            this._containersToHideEls = document.querySelectorAll(containersToHideWhenResultSelector);
        },

        _showResults: false,
        _searching: false,
        _searchText: '',
        _searchResults: [],

        refreshUi() {
            const self = this;

            self._inputElements.forEach(el => el.value = self._searchText );

            const html = self._showResults
                ? self._searching
                    ? ejs.render(self._searchingTemplate, { searchText: self._searchText })
                    : ejs.render(self._resultTemplate, { urlPrefix: self._urlPrefix.replace(/\/+$/, ''), searchText: self._searchText, searchResults: self._searchResults })
                : '';

            self._resultContainerEls.forEach(el => { 
                // hide/show container
                self._showResults ? el.classList.remove("d-none") : el.classList.add("d-none")
                
                // find results element and set results
                const resultsEl = el.querySelector(".search-results");
                if (resultsEl) {
                    resultsEl.innerHTML = self._showResults ? html : "";
                }
            });

            self._containersToHideEls.forEach(el => self._showResults ? el.classList.add("d-none") : el.classList.remove("d-none"));          
        },

        clearSearch() {
            this._showResults = false;
            this._searchText = '';
            this._searchResults = [];
            this.refreshUi();
        },

        search(text) {

            const self = this;

            console.log('searching for: ', text);
            self._searchText = text;

            if (!text) {
                self.clearSearch();
                return;
            }

            this._searchResults = [];
            self._searching = true;
            self._showResults = true;
            this.refreshUi();

            const hasSpecial = self._lunrSpecial.some(special => text.includes(special));
            const pattern =  hasSpecial 
                ? text
                : text + "*";

            console.log('lunr pattern: ', pattern);
            const localResults = self._lunrEngine.search(pattern);

            // NOTE: just for tests...
            // console.log('total result', localResults)

            // NOTE: highlighting
            localResults.forEach(localResult => {
                // NOTE: hard. ref.
                const data = self._lunrSearchData.find(i => i.url == localResult.ref);

                const highlight = {};

                for (let term in localResult.matchData.metadata) {
                    for (let field in localResult.matchData.metadata[term]) {

                        const positions = localResult.matchData.metadata[term][field].position;

                        const fieldValue = data[field];
                        let fieldReadIndex = 0;

                        highlight[field] = "";

                        for (let position of positions) {

                            if (position[0] > fieldReadIndex)
                                highlight[field] += fieldValue.substring(fieldReadIndex, position[0]);

                            highlight[field] += ("{:::" + fieldValue.substring(position[0], position[0] + position[1]) + ":::}");

                            fieldReadIndex = position[0] + position[1];

                        }

                        highlight[field] += fieldValue.substring(fieldReadIndex);             

                    }

                }

                for (let key in highlight) {
                    let value = highlight[key];

                    const encode = false;
                    let encoded = encode
                        ? he.encode(value)
                        : value;

                    let highlighted = encoded.replace(/{:::/g, '<mark>').replace(/:::}/g, '</mark>');
                    highlight[key] = highlighted;
                }

                localResult.ref = Object.assign({}, data, highlight);
            });

            self._searchResults = localResults;

            // finally
            self._searching = false;
            self.refreshUi();
        },

        _lunrSpecial: "*+-:^~".split(''),
        _lunrSearchData: undefined,
        _lunrEngine: undefined,

        init(inputSelector, cancelSelector, resultContainerSelector, containersToHideWhenResultSelector) {

            console.log('initializing search', this);

            // set up result / hide elements
            this._setUpContainers(resultContainerSelector, containersToHideWhenResultSelector);

            // refresh
            this.refreshUi();

            fetch(this._searchIndexPath).then((response) => {
                response.json().then((raw) => {

                    // set up engine, store search data
                    this._lunrSearchData = raw;

                    this._lunrEngine = lunr(function () {
                        this.ref('url')
                        this.field('title')
                        this.field('date')
                        this.field('author')
                        this.field('summary')
                        this.field('text')

                        this.metadataWhitelist = ['position']

                        raw.forEach(function (doc) { this.add(doc) }, this)
                    });

                    // set up UI listeners
                    this._debouncedSearch = new Debouncer((args) => this.search(args), this._debounceTime);
                    this._setUpListeners(inputSelector, cancelSelector);

                    // refresh
                    this.refreshUi();
                });
            });

        }

    };

    // NOTE:
    // #search-results-container must have an additional element with a .search-results class
    // these objects (along with #global-content-view) were already set up inside main.njk
    blogSearch.init('.blog-search-input', '.blog-search-cancel', '#search-results-container', '#global-content-view');

</script>


        

        


        

        

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css" integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin="anonymous"></script>

<script>
    const scripts_config = {

        defaultCookies: function () {
            console.log('default cookies');

            // note: using anonymized IP
            if (typeof loadGA === 'function') loadGA(true);
        },

        enableCookies: function () {
            console.log('enabled cookies');

            if (typeof loadGA === 'function') loadGA(false);
            if (typeof loadDisqus === 'function') loadDisqus();
        },

        disableCookies: function () {
            console.log('disabled cookies');

            this.defaultCookies();
        },

        loadScripts: function (requireConsent, consentUrl) {
            if (requireConsent) {
                // scripts managed based on consent status
                this.initializeCookieConsent(consentUrl);
            } else {
                // all scripts enabled
                this.enableCookies();
            }
        },

        initializeCookieConsent: function (consentUrl) {

            const me = this;

            window.cookieconsent.initialise({
                "palette": {
                    "popup": {
                        "background": "#edeff5",
                        "text": "#838391"
                    },
                    "button": {
                        "background": "#4b81e8"
                    }
                },
                "position": "bottom-right",
                "type": "opt-in",
                "content": {
                    "message": "This website uses cookies to ensure you get the best experience here.",
                    "href": consentUrl
                },

                onInitialise: function (status) {
                    console.log(`cc - onInitialise, status: ${status}`);

                    var type = this.options.type;
                    var didConsent = this.hasConsented();
                    if (type == 'opt-in' && didConsent) {
                        me.enableCookies();
                    }
                    else if (type == 'opt-out' && !didConsent) {
                        me.disableCookies();
                    }
                    else {
                        me.defaultCookies();
                    }
                },

                onStatusChange: function (status, chosenBefore) {
                    console.log(`cc - onStatusChange, status: ${status}, chosenBefore: ${chosenBefore}`);

                    var type = this.options.type;
                    var didConsent = this.hasConsented();
                    if (type == 'opt-in' && didConsent) {
                        me.enableCookies();
                    }
                    if (type == 'opt-out' && !didConsent) {
                        me.disableCookies();
                    }
                },

                onRevokeChoice: function () {
                    // NOTE: this hook is called immediately after the revoke button is clicked and removes previous answers
                    console.log(`cc - onRevokeChoice`);

                    var type = this.options.type;
                    if (type == 'opt-in') {
                        me.disableCookies();

                        // NOTE: we need to reload page, so that we get rid of the loaded GA / Disqus scripts!
                        location.reload();
                    }
                    if (type == 'opt-out') {
                        me.enableCookies();
                    }
                },

                onPopupOpen: function () {
                    console.log(`cc - onPopupOpen`);
                },

                onPopupClose: function () {
                    console.log(`cc - onPopupClose`);
                }

            });

        }

    };

    const requireConsent = JSON.parse('true');
    const consentUrl = '/jamstack-eleventy-custom/cookies.html';
    
    scripts_config.loadScripts(requireConsent, consentUrl);
</script>



    </body>

    <!-- dynamic & custom scripts that need to run after the entire "final" content is rendered -->
    <script src="/jamstack-eleventy-custom/assets/js/custom/d-hide-if-empty.js"></script>
    <script src="/jamstack-eleventy-custom/assets/js/custom/sticky.js"></script>

</html>
